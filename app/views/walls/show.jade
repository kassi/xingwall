extends ../layout

block js
  script(src='/components/jquery/dist/jquery.min.js')
  script(src='/components/angular/angular.min.js')
  script(src='/socket.io/socket.io.js')
  script(src='/js/vendor/qrcode.js')
  script.
    var socket = io();

block content
  div(ng-cloak ng-app='xingwall' xingwall=wall_id)
    #overlay(ng-click='setCurrentProfile($event, false)' ng-class='{active: currentProfile}')

    .qr-wrapper
      .qr-title.intro Connect
      #qr
      .qr-title with XING

    .intro-switch(title="Toggle introduction mode")

    section.wall-details(ng-class='{active: currentProfile}')
      a.close(href="#" ng-click='setCurrentProfile($event, false)') &times;
      h1= "{{currentProfile.displayName}}"
      img.profile-photo(ng-src="{{currentProfile.photoUrls.size_256x256}}")

      p.content-line(ng-if="currentProfile.wants")
        strong Wants
        = "{{currentProfile.wants}}"

      p.content-line(ng-if="currentProfile.haves")
        strong Haves
        = "{{currentProfile.haves}}"

      //h2 Web Profiles

      .content-line(ng-if="currentProfile.webProfiles.homepage.length")
        strong Homepage
        ul
          li(ng-repeat='link in currentProfile.webProfiles.homepage')
            a(href="{{link}}" target="_blank")= "{{link}}"

      .content-line(ng-if="currentProfile.webProfiles.facebook.length")
        strong Facebook
        ul
          li(ng-repeat='link in currentProfile.webProfiles.facebook')
            a(href="{{link}}" target="_blank")= "{{link}}"

      .content-line(ng-if="currentProfile.webProfiles.twitter.length")
        strong Twitter
        ul
          li(ng-repeat='link in currentProfile.webProfiles.twitter')
            a(href="{{link}}" target="_blank")= "{{link}}"

      .content-line(ng-if="currentProfile.webProfiles['google+'].length")
        strong Google+
        ul
          li(ng-repeat='link in currentProfile.webProfiles["google+"]')
            a(href="{{link}}" target="_blank")= "{{link}}"

      .content-line(ng-if="currentProfile.webProfiles.amazon.length")
        strong Amazon
        ul
          li(ng-repeat='link in currentProfile.webProfiles.amazon')
            a(href="{{link}}" target="_blank")= "{{link}}"

      .content-line(ng-if="currentProfile.webProfiles.ebay.length")
        strong Ebay
        ul
          li(ng-repeat='link in currentProfile.webProfiles.ebay')
            a(href="{{link}}" target="_blank")= "{{link}}"

      .content-line(ng-if="currentProfile.webProfiles.youtube.length")
        strong YouTube
        ul
          li(ng-repeat='link in currentProfile.webProfiles.youtube')
            a(href="{{link}}" target="_blank")= "{{link}}"

      .content-line(ng-if="currentProfile.webProfiles.yelp.length")
        strong Yelp
        ul
          li(ng-repeat='link in currentProfile.webProfiles.yelp')
            a(href="{{link}}" target="_blank")= "{{link}}"

      .content-line(ng-if="currentProfile.webProfiles.reddit.length")
        strong Reddit
        ul
          li(ng-repeat='link in currentProfile.webProfiles.reddit')
            a(href="{{link}}" target="_blank")= "{{link}}"

      .content-line(ng-if="currentProfile.webProfiles.foursquare.length")
        strong Foursquare
        ul
          li(ng-repeat='link in currentProfile.webProfiles.foursquare')
            a(href="{{link}}" target="_blank")= "{{link}}"

      .content-line(ng-if="currentProfile.webProfiles.flickr.length")
        strong Flickr
        ul
          li(ng-repeat='link in currentProfile.webProfiles.flickr')
            a(href="{{link}}" target="_blank")= "{{link}}"

      .content-line(ng-if="currentProfile.webProfiles.reddit.length")
        strong Reddit
        ul
          li(ng-repeat='link in currentProfile.webProfiles.reddit')
            a(href="{{link}}" target="_blank")= "{{link}}"


    .wall
      .wall-content
        section.wall-profiles
          ul
            li(ng-repeat='profile in profiles')
              a.wall-profile-entry(href='#' ng-click='setCurrentProfile($event, profile)' ng-class='{ active: profile.isActive }')
                img(ng-src="{{profile.photoUrls.size_128x128}}")


block footer_js
  script(src='/js/grid.js')
  script(src='/js/client.js')
  script(src='/js/qr.js')
  script(src='/js/introduction.js')
  script(src='/js/swipe.js')
  script(src='/js/keys.js')
